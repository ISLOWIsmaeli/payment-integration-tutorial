{% extends "base.html" %}
{% block title %}Payment Page{% endblock title %}
{% block content %}
<div class="container">
    <h2>Complete Your Payment</h2>

    <label for="method">Select Payment Method</label>
    <select id="method">
      <option value="card">Credit / Debit Card</option>
      <option value="mpesa">M-Pesa</option>
    </select>

    <!-- Card Payment Form -->
    <form id="cardForm" method="POST" action="/api/payments/card">
      <label>Full Name</label>
      <input type="text" name="name" placeholder="John Doe" required>

      <label>Card Number</label>
      <input type="text" name="card_number" maxlength="16" placeholder="1234 5678 9012 3456" required>

      <label>Expiry Date</label>
      <input type="text" name="expiry" placeholder="MM/YY" required>

      <label>CVV</label>
      <input type="text" name="cvv" maxlength="4" placeholder="123" required>

      <button type="submit">Pay Now</button>
    </form>

    <!-- M-Pesa Payment Form -->
    <form id="mpesaForm" class="hidden" method="POST" action="/api/payments/mpesa">
      <label>Full Name</label>
      <input type="text" name="name" placeholder="Jane Wanjiku" required>

      <label>Phone Number</label>
      <input type="tel" name="phone" placeholder="07XXXXXXXX" required>

      <button type="submit">Pay with M-Pesa</button>
    </form>
  </div>

  <script>
    const methodSelect = document.getElementById("method");
    const cardForm = document.getElementById("cardForm");
    const mpesaForm = document.getElementById("mpesaForm");

    methodSelect.addEventListener("change", () => {
      if (methodSelect.value === "card") {
        cardForm.classList.remove("hidden");
        mpesaForm.classList.add("hidden");
      } else {
        mpesaForm.classList.remove("hidden");
        cardForm.classList.add("hidden");
      }
    });
  </script>

{% endblock content %}